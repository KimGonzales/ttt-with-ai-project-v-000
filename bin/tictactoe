#!/usr/bin/env ruby

require_relative '../config/environment'

##########################CLI METHODS ########################################
def start_game
  puts "Welcome to Tic Tac Toe!"
  puts "Please Select The Number of Players:"
  puts "Enter '0' for Computer Vs. Computer Mode."
  puts "Enter '1' to Play against The Computer."
  puts "Enter '2' to Play against a Friend."

  selected_players = gets.strip.to_i

  if selected_players == 2
    puts "You VS a Friend. Player X will move first."
    game = Game.new
    game.play

  elsif selected_players == 1
    puts "You VS Computer."
    select_token

  else selected_players ==0

    puts "Computer VS Computer"
    game = Game.new(player_1 =Players::Computer.new("X"), player_2 = Players::Computer.new("O"), board = Board.new)
    game.play
  end
end

def select_token
  puts "Choose a Token: X or O. X moves first."
  selected_token = gets.strip.to_s.capitalize

    if selected_token == "X"
      game = Game.new(player_1 =Players::Human.new("X"), player_2 = Players::Computer.new("O"), board = Board.new)
      game.play
    elsif selected_token =="O"
      game = Game.new(player_1 =Players::Computer.new("X"), player_2 = Players::Human.new("O"), board = Board.new)
      game.play
    else
      puts "Not a valid token!"
      selected_token
    end
end

def play_again?
  input = ''
  puts "Would you like to play again?"
  puts "Enter 'Y' or 'N'"
  input = gets.strip.to_s.capitalize
  if input == 'Y' || input == 'YES'
    start_game
  elsif input == 'N' || input == 'NO'
    puts "Thanks for playing. Come back soon!"
    exit
  else
    puts "That isn't valid input!"
    play_again?
  end
end

########################## CALL ###########################################

start_game
loop do
  play_again?
end
